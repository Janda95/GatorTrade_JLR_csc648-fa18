<div class="container">
  <br>
  <h2>User Dashboard</h2>
  <% include ../error.ejs %>
  <br>

  <!-- Nav tabs -->
  <ul class="nav nav-tabs" role="tablist">
    <li class="nav-item">

      <!-- REMOVED TABS 
      <a class="nav-link active" data-toggle="tab" href="#home">WATCHLIST</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-link" data-toggle="tab" href="#menu2">READ MESSAGES</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-link" data-toggle="tab" href="#menu4">SETTINGS</a>
    </li>
    -->

    <li class="nav-item">
      <a class="nav-link" data-toggle="tab" href="#home">MESSAGES</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" data-toggle="tab" href="#menu1">POSTS</a>
    </li>
  </ul>

  <!-- Tab panes -->
  <!-- WATCHLIST TAB 
  <div class="tab-content">
    <div id="home" class="container tab-pane active"><br>
      <h2>Welcome, User!</h2>
      <h5>Here's your watchlist:</h5>
      <div class="table-responsive-lg">
        <table class="table">
          <thead>
            <tr>
              <th>
                <form action="">
                  <input type="checkbox" name=" " value=" ">
                </form>
              </th>
              <th>
                Item<i class="fa fa-sort float-right" aria-hidden="true"></i>
              </th>
              <th>Description</th>
              <th>Price
                <i class="fa fa-sort float-right" aria-hidden="true"></i>
              </th>
              <th>Respond</th>

            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                <form action="">
                  <input type="checkbox" name=" " value=" ">
                </form>
              </td>
              <td>Purple Shoes</td>
              <td>
                Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
                consequat.
              </td>
              <td>$30.00</td>
              <td><button type="button" class="btn btn-success float-right">Send Message</button></td>
            </tr>
            <tr>
              <td>
                <form action="">
                  <input type="checkbox" name=" " value=" ">
                </form>
              </td>
              <td>Leather Bag</td>
              <td>
                Sunt in culpa qui officia deserunt mollit anim id est laborum consectetur adipiscing elit, sed do
                eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud
                exercitation ullamco.
              </td>
              <td>$45.00</td>
              <td><button type="button" class="btn btn-success float-right">Send Message</button></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    -->

  <!-- MESSAGES TAB -->
  <div class="tab-content bg-light">
    <div id="home" class="container tab-pane active"><br>
      <p class="h2" style="color:indigo">Welcome, User!</p>
      <h5>Here are your messages:</h5>
      <br>
      <div class="table-responsive-lg">
        <table class="table">
          <thead class="thead-light">
            <tr>
              <th scope="col">  
                Item <i class="fa fa-sort float-right" aria-hidden="true"></i>
              </th>
              <th scope="col">Message</th>
              <th scope="col">
                Date
                <i class="fa fa-sort float-right" aria-hidden="true"></i>
              </th>
              <th scope="col">Read</th>
            </tr>
          </thead>
          <% if (typeof messages != "undefined") { %>
          <% messages.forEach((message) => { %>
          <tbody>
            <tr>
              <th scope="row"><a href="/post/<%= message.item_id %>" class="btn">
                  <%=message.item_id%>
              </th>
              <td>
                <%= message.message %>
              </td>
              <td>
                <%= message.createdAt %>
              </td>
              <td><button type="button" class="btn btn-raised btn-primary">Read</button></td>
            </tr>
          </tbody>
          <%});%>
          <% } %>
        </table>
      </div>
    </div>

    <!-- READ MESSAGES TAB 
    <div id="menu2" class="container tab-pane fade"><br>
      <h2>Read Messages</h2>
      <br>
      <div class="table-responsive-lg">
        <table class="table">
          <thead>
            <tr>
              <th>
                <form action="">
                  <input type="checkbox" name=" " value=" ">
                </form>
              </th>
              <th>
                  Item
                  <i class="fa fa-sort float-right" aria-hidden="true"></i>
                </th>
              <th>Description</th>
              <th>
                Date
                <i class="fa fa-sort float-right" aria-hidden="true"></i>
              </th>
              <th>Remove</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                <form action="">
                  <input type="checkbox" name=" " value=" ">
                </form>
              </td>
              <td>Purple Shoes</td>
              <td>
                Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
                consequat.
              </td>
              <td>10.28.18</td>
              <td>
                <form class="form-horizontal" action="/action_page.php">
                  <div class="form-group">
                    <button type="edit" class="btn btn-danger">Remove</button>
                </form>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    -->

    <!-- POSTS TAB -->
    <div id="menu1" class="container tab-pane fade"><br>
      <div class="container">
        <div class="row">
          <div class="col-sm-2">
            <p class="h2" style="color:indigo">My Posts</p>
          </div>
          <div class="col">
            <div class="text-left">
              <form class="form-horizontal" action="/action_page.php">
                <div class="form-group">
                  <button type="button" class="btn btn-raised btn-success">Add Post</button>
              </form>
            </div>
          </div>
          <!--closes row-->
        </div>
        <!--closes container-->
      </div>

      <h2></h2>

      <div class="table-responsive-lg">
        <table class="table table-bordered">
          <thead class="thead-light">
            <tr>
              <th scope="col">
                Item
                <i class="fa fa-sort float-right" aria-hidden="true"></i>
              </th>
              <th scope="col">Description</th>
              <th scope="col">
                Date
                <i class="fa fa-sort float-right" aria-hidden="true"></i>
              </th>
              <th scope="col">View/Edit</th>
              <th scope="col">Remove</th>
            </tr>
          </thead>

          <!-- For each post with seller_id being the user, display post details -->
          <% if (typeof posts != "undefined") { %>
          <% posts.forEach((post) => { %>
          <tr>
            <td><a href="/post/<%= post.item_id %>" class="btn">
                <%= post.title %>
            </td>
            <td>
              <%= post.description %>
            </td>
            <td>
              <%= post.updatedAt %>
            </td>
            <td>
              <form class="form-horizontal" action="/action_page.php">
                <div class="form-group">
                  <div class="row"></div>
                  <button type="button" class="btn btn-raised btn-info">Edit</button>
              </form>
            </td>
            <td>
              <div class="row"></div>

              <!-- Button trigger modal -->
              <button type="button" class="btn btn-raised btn-danger" data-toggle="modal" data-target="#exampleModal">
                Remove
              </button>

              <!-- Modal -->
              <script>
                $('#myModal').on('shown.bs.modal', function () {
                  $('#myInput').trigger('focus')
                })
              </script>

              <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                aria-hidden="true">
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLabel">Removal of Post</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      Are you sure you would like to remove this post?
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-raised btn-success">Confirm</button>
                    </div>
                  </div>
                </div>
              </div>
            </td>
          </tr>
          <%});%>
          <% } %>

          </tbody>

        </table>
      </div>
    </div>

    <!-- SETTINGS TAB 
  <div id="menu4" class="container tab-pane fade"><br>
    <h2>Change Settings</h2>
    <div class="container-fluid">

      <h5>Edit Profile Picture</h5>
      <img src="//placehold.it/150" class="rounded-circle" alt="Cinque Terre" width="250" height="236">
      <br>
      <br>
      <input type="file" id="myFile">
      <div class="row">
        <div class="col-lg-12">
          <div class="form-group">
            <br>
            <label for="form_password">Change Password <small>(8 character minimum) *</small></label>
            <input id="form_password" type="password" name="password" class="form-control" placeholder="Please Enter Your Password"
              max-length="40" pattern="^[A-Za-z0-9 ]*$" title="Alphanumeric Characters Only">
            <div class="help-block with-errors"></div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-lg-12">
          <div class="form-group">
            <label for="form_confirm_password">Confirm Password *</label>
            <input id="form_confirm_password" type="password" name="confirmpassword" class="form-control" placeholder="Please Re-Enter Your Password"
              max-length="40" pattern="^[A-Za-z0-9 ]*$" title="Alphanumeric Characters Only">
            <div class="help-block with-errors"></div>
          </div>
        </div>
        <button type="button" class="btn btn-success btn-block">Update Changes</button>
      </div>
    </div>
  </div>-->

    <!--closes tab content from messages tab-->
  </div>


  <!--for modal-->
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>
  <script src="https://unpkg.com/popper.js@1.12.6/dist/umd/popper.js" integrity="sha384-fA23ZRQ3G/J53mElWqVJEGJzU0sTs+SvzG8fXVWP+kJQ1lwFAOkcUOysnlKJC33U"
    crossorigin="anonymous"></script>

